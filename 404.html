<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Page Not Found</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 650px;
            margin: 0 auto;
            padding: 2rem 1rem;
            text-align: center;
        }
        h1 {
            margin-top: 2rem;
            color: #e53e3e;
        }
        a {
            color: #3182ce;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
    </style>
    <script>
        // Get the current path and query parameters
        const path = window.location.pathname;
        const query = window.location.search;
        
        // First, handle GitHub Pages repo path if applicable
        let basePath = '';
        let pathToCheck = path;
        
        // If hosted on GitHub Pages with a repo name (not custom domain)
        if (window.location.hostname.includes('github.io')) {
            const pathParts = path.split('/');
            if (pathParts.length > 1 && pathParts[1] !== '') {
                basePath = '/' + pathParts[1];
                pathToCheck = path.substring(basePath.length) || '/';
            }
        }
        
        // Check if the path is already versioned
        // Look for /latest/ or version patterns like /0.9.1/ at the start of the path
        const versionRegex = /^\/(latest|[\d]+\.[\d]+(\.[\d]+)?([-_][a-zA-Z0-9]+)?)\//;
        const hasVersion = versionRegex.test(pathToCheck);
        
        // If no version in path, redirect to same path in latest
        if (!hasVersion) {
            const newPath = pathToCheck === '/' ? '/latest/' : '/latest' + pathToCheck;
            window.location.replace(basePath + newPath + query);
        } else {
            // Already in a versioned path and got a 404
            // Wait for DOM to be ready
            document.addEventListener('DOMContentLoaded', function() {
                document.getElementById('redirecting-message').style.display = 'none';
                document.getElementById('version-404').style.display = 'block';
            });
        }
    </script>
</head>
<body>
    <!-- Default message shown briefly during redirect -->
    <div id="redirecting-message">
        <h1>Redirecting...</h1>
        <p>Taking you to the latest documentation.</p>
    </div>
    
    <!-- Only shown if already in a versioned path and got 404 -->
    <div id="version-404" style="display: none;">
        <h1>Page Not Found</h1>
        <p>Sorry, the page you're looking for doesn't exist.</p>
        <p>Please visit the <a href="https://docs.ag2.ai">documentation homepage</a> to find what you're looking for.</p>
    </div>
</body>
</html>
