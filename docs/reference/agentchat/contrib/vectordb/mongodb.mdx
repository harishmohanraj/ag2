---
sidebarTitle: mongodb
title: autogen.agentchat.contrib.vectordb.mongodb
---

## Functions

<code class="doc-symbol doc-symbol-heading doc-symbol-function"></code>
#### with_id_rename
<a href="#autogen.agentchat.contrib.vectordb.mongodb..with_id_rename" class="headerlink" title="Permanent link"></a>

```python
with_id_rename(docs: &lt;class 'collections.abc.Iterable'>) -> list[dict[str, typing.Any]]
```

    Utility changes _id field from Collection into id for Document.

<b>Parameters:</b>
| Name | Description |
|--|--|
| `docs` | **Type:** `<class 'collections.abc.Iterable'>` |

<br />

    <h2 id="autogen.agentchat.contrib.vectordb.mongodb.MongoDBAtlasVectorDB" class="doc doc-heading">
        <code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>
        <span class="doc doc-object-name doc-class-name">MongoDBAtlasVectorDB</span>
        <a href="#autogen.agentchat.contrib.vectordb.mongodb.MongoDBAtlasVectorDB" class="headerlink" title="Permanent link"></a>
    </h2>

```python
MongoDBAtlasVectorDB(
    connection_string: str = '',
    database_name: str = 'vector_db',
    embedding_function: Callable | None = None,
    collection_name: str = None,
    index_name: str = 'vector_index',
    overwrite: bool = False,
    wait_until_index_ready: float = None,
    wait_until_document_ready: float = None
)
```

    A Collection object for MongoDB.
    
    Initialize the vector database.

<b>Parameters:</b>
| Name | Description |
|--|--|
| `connection_string` | str | The MongoDB connection string to connect to.<br/><br/>Default is ''.<br/><br/>**Type:** `str`<br/><br/>**Default:** '' |
| `database_name` | str | The name of the database.<br/><br/>Default is 'vector_db'.<br/><br/>**Type:** `str`<br/><br/>**Default:** 'vector_db' |
| `embedding_function` | Callable | The embedding function used to generate the vector representation.<br/><br/>**Type:** `Callable \| None`<br/><br/>**Default:** None |
| `collection_name` | str | The name of the collection to create for this vector database Defaults to None<br/><br/>**Type:** `str`<br/><br/>**Default:** None |
| `index_name` | str | Index name for the vector database, defaults to 'vector_index'<br/><br/>**Type:** `str`<br/><br/>**Default:** 'vector_index' |
| `overwrite` | bool = False<br/><br/>**Type:** `bool`<br/><br/>**Default:** False |
| `wait_until_index_ready` | float | None | Blocking call to wait until the database indexes are ready.<br/><br/>None, the default, means no wait.<br/><br/>**Type:** `float`<br/><br/>**Default:** None |
| `wait_until_document_ready` | float | None | Blocking call to wait until the database indexes are ready.<br/><br/>None, the default, means no wait.<br/><br/>**Type:** `float`<br/><br/>**Default:** None |

### Instance Methods

<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>
#### create_collection
<a href="#autogen.agentchat.contrib.vectordb.mongodb.MongoDBAtlasVectorDB.create_collection" class="headerlink" title="Permanent link"></a>

```python
create_collection(
    self,
    collection_name: str,
    overwrite: bool = False,
    get_or_create: bool = True
) -> pymongo.synchronous.collection.Collection
```

    Create a collection in the vector database and create a vector search index in the collection.

<b>Parameters:</b>
| Name | Description |
|--|--|
| `collection_name` | str | The name of the collection.<br/><br/>**Type:** `str` |
| `overwrite` | bool | Whether to overwrite the collection if it exists.<br/><br/>Default is False.<br/><br/>**Type:** `bool`<br/><br/>**Default:** False |
| `get_or_create` | bool | Whether to get or create the collection.<br/><br/>Default is True<br/><br/>**Type:** `bool`<br/><br/>**Default:** True |

<br />

<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>
#### create_index_if_not_exists
<a href="#autogen.agentchat.contrib.vectordb.mongodb.MongoDBAtlasVectorDB.create_index_if_not_exists" class="headerlink" title="Permanent link"></a>

```python
create_index_if_not_exists(
    self,
    index_name: str = 'vector_index',
    collection: Collection = None
) -> None
```

    Creates a vector search index on the specified collection in MongoDB.

<b>Parameters:</b>
| Name | Description |
|--|--|
| `index_name` | **Type:** `str`<br/><br/>**Default:** 'vector_index' |
| `collection` | The MongoDB collection to create the index on.<br/><br/>Defaults to None.<br/><br/>**Type:** `Collection`<br/><br/>**Default:** None |

<br />

<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>
#### create_vector_search_index
<a href="#autogen.agentchat.contrib.vectordb.mongodb.MongoDBAtlasVectorDB.create_vector_search_index" class="headerlink" title="Permanent link"></a>

```python
create_vector_search_index(
    self,
    collection: Collection,
    index_name: str | None = 'vector_index',
    similarity: Literal['euclidean', 'cosine', 'dotProduct'] = 'cosine'
) -> None
```

    Create a vector search index in the collection.

<b>Parameters:</b>
| Name | Description |
|--|--|
| `collection` | An existing Collection in the Atlas Database.<br/><br/>**Type:** `Collection` |
| `index_name` | Vector Search Index name.<br/><br/>**Type:** `str \| None`<br/><br/>**Default:** 'vector_index' |
| `similarity` | Algorithm used for measuring vector similarity.<br/><br/>**Type:** `Literal['euclidean', 'cosine', 'dotProduct']`<br/><br/>**Default:** 'cosine' |

<b>Returns:</b>
| Type | Description |
|--|--|
| `None` | None |

<br />

<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>
#### delete_collection
<a href="#autogen.agentchat.contrib.vectordb.mongodb.MongoDBAtlasVectorDB.delete_collection" class="headerlink" title="Permanent link"></a>

```python
delete_collection(self, collection_name: str) -> None
```

    Delete the collection from the vector database.

<b>Parameters:</b>
| Name | Description |
|--|--|
| `collection_name` | str | The name of the collection.<br/><br/>**Type:** `str` |

<br />

<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>
#### delete_docs
<a href="#autogen.agentchat.contrib.vectordb.mongodb.MongoDBAtlasVectorDB.delete_docs" class="headerlink" title="Permanent link"></a>

```python
delete_docs(
    self,
    ids: list[str | int],
    collection_name: str = None,
    **kwargs
) -> 
```

    Delete documents from the collection of the vector database.

<b>Parameters:</b>
| Name | Description |
|--|--|
| `ids` | List[ItemID] | A list of document ids.<br/><br/>Each id is a typed `ItemID`.<br/><br/>**Type:** `list[str \| int]` |
| `collection_name` | str | The name of the collection.<br/><br/>Default is None.<br/><br/>**Type:** `str`<br/><br/>**Default:** None |
| `**kwargs` |  |

<br />

<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>
#### get_collection
<a href="#autogen.agentchat.contrib.vectordb.mongodb.MongoDBAtlasVectorDB.get_collection" class="headerlink" title="Permanent link"></a>

```python
get_collection(self, collection_name: str = None) -> pymongo.synchronous.collection.Collection
```

    Get the collection from the vector database.

<b>Parameters:</b>
| Name | Description |
|--|--|
| `collection_name` | str | The name of the collection.<br/><br/>Default is None.<br/><br/>If None, return the current active collection.<br/><br/>**Type:** `str`<br/><br/>**Default:** None |

<b>Returns:</b>
| Type | Description |
|--|--|
| `pymongo.synchronous.collection.Collection` | Collection \| The collection object. |

<br />

<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>
#### get_docs_by_ids
<a href="#autogen.agentchat.contrib.vectordb.mongodb.MongoDBAtlasVectorDB.get_docs_by_ids" class="headerlink" title="Permanent link"></a>

```python
get_docs_by_ids(
    self,
    ids: list[str | int] = None,
    collection_name: str = None,
    include: list[str] = None,
    **kwargs
) -> list[autogen.agentchat.contrib.vectordb.base.Document]
```

    Retrieve documents from the collection of the vector database based on the ids.

<b>Parameters:</b>
| Name | Description |
|--|--|
| `ids` | List[ItemID] | A list of document ids.<br/><br/>If None, will return all the documents.<br/><br/>Default is None.<br/><br/>**Type:** `list[str \| int]`<br/><br/>**Default:** None |
| `collection_name` | str | The name of the collection.<br/><br/>Default is None.<br/><br/>**Type:** `str`<br/><br/>**Default:** None |
| `include` | List[str] | The fields to include.<br/><br/>If None, will include ["metadata", "content"], ids will always be included.<br/><br/>Basically, use include to choose whether to include embedding and metadata<br/><br/>**Type:** `list[str]`<br/><br/>**Default:** None |
| `**kwargs` |  |

<b>Returns:</b>
| Type | Description |
|--|--|
| `list[autogen.agentchat.contrib.vectordb.base.Document]` | List[Document] \| The results. |

<br />

<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>
#### insert_docs
<a href="#autogen.agentchat.contrib.vectordb.mongodb.MongoDBAtlasVectorDB.insert_docs" class="headerlink" title="Permanent link"></a>

```python
insert_docs(
    self,
    docs: list[autogen.agentchat.contrib.vectordb.base.Document],
    collection_name: str = None,
    upsert: bool = False,
    batch_size=100000,
    **kwargs
) -> None
```

    Insert Documents and Vector Embeddings into the collection of the vector database.
    
    For large numbers of Documents, insertion is performed in batches.

<b>Parameters:</b>
| Name | Description |
|--|--|
| `docs` | List[Document] | A list of documents.<br/><br/>Each document is a TypedDict `Document`.<br/><br/>**Type:** `list[autogen.agentchat.contrib.vectordb.base.Document]` |
| `collection_name` | str | The name of the collection.<br/><br/>Default is None.<br/><br/>**Type:** `str`<br/><br/>**Default:** None |
| `upsert` | bool | Whether to update the document if it exists.<br/><br/>Default is False.<br/><br/>**Type:** `bool`<br/><br/>**Default:** False |
| `batch_size=100000` |  |
| `**kwargs` |  |

<br />

<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>
#### list_collections
<a href="#autogen.agentchat.contrib.vectordb.mongodb.MongoDBAtlasVectorDB.list_collections" class="headerlink" title="Permanent link"></a>

```python
list_collections(self) -> 
```

    List the collections in the vector database.
    
    Returns:
        List[str] | The list of collections.

<br />

<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>
#### retrieve_docs
<a href="#autogen.agentchat.contrib.vectordb.mongodb.MongoDBAtlasVectorDB.retrieve_docs" class="headerlink" title="Permanent link"></a>

```python
retrieve_docs(
    self,
    queries: list[str],
    collection_name: str = None,
    n_results: int = 10,
    distance_threshold: float = -1,
    **kwargs
) -> list[list[tuple[autogen.agentchat.contrib.vectordb.base.Document, float]]]
```

    Retrieve documents from the collection of the vector database based on the queries.

<b>Parameters:</b>
| Name | Description |
|--|--|
| `queries` | List[str] | A list of queries.<br/><br/>Each query is a string.<br/><br/>**Type:** `list[str]` |
| `collection_name` | str | The name of the collection.<br/><br/>Default is None.<br/><br/>**Type:** `str`<br/><br/>**Default:** None |
| `n_results` | int | The number of relevant documents to return.<br/><br/>Default is 10.<br/><br/>**Type:** `int`<br/><br/>**Default:** 10 |
| `distance_threshold` | float | The threshold for the distance score, only distance smaller than it will be returned.<br/><br/>Don't filter with it if &lt; 0. Default is -1.<br/><br/>**Type:** `float`<br/><br/>**Default:** -1 |
| `**kwargs` |  |

<b>Returns:</b>
| Type | Description |
|--|--|
| `list[list[tuple[autogen.agentchat.contrib.vectordb.base.Document, float]]]` | QueryResults \| For each query string, a list of nearest documents and their scores. |

<br />

<code class="doc-symbol doc-symbol-heading doc-symbol-method"></code>
#### update_docs
<a href="#autogen.agentchat.contrib.vectordb.mongodb.MongoDBAtlasVectorDB.update_docs" class="headerlink" title="Permanent link"></a>

```python
update_docs(
    self,
    docs: list[autogen.agentchat.contrib.vectordb.base.Document],
    collection_name: str = None,
    **kwargs: Any
) -> None
```

    Update documents, including their embeddings, in the Collection.
    
    Optionally allow upsert as kwarg.
    
    Uses deepcopy to avoid changing docs.

<b>Parameters:</b>
| Name | Description |
|--|--|
| `docs` | List[Document] | A list of documents.<br/><br/>**Type:** `list[autogen.agentchat.contrib.vectordb.base.Document]` |
| `collection_name` | str | The name of the collection.<br/><br/>Default is None.<br/><br/>**Type:** `str`<br/><br/>**Default:** None |
| `**kwargs` | **Type:** `Any` |

<br />